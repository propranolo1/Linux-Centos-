# 用户管理

## 登录注销

### 登录

```
su xin *登录到名称为xin的账号
```

### 注销

```
logout *注销当前用户，该命令只在级别3有效（init 3）
```

## 家目录

每个用户都拥有一个对应的家目录，当使用用户进行登录时，就会进入其对应的家目录

![image-20220619154528871](https://propran-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220619154528871.png)

​                                                                        用户xin的目录

## 用户的添加和删除

### 创建用户

useradd [参数]

| 参数 | 说明                                          |
| ---- | --------------------------------------------- |
| -d   | 指定用户的其实目录，不指定的话默认为/home     |
| -g   | 指定用户所属的组，可以指定多个组              |
| -G   | 指定用户的附属群组，每个群组使用【,】进行隔开 |
| -m   | 建立用户的主目录                              |
| -M   | 不要建立用户的主目录                          |
| -s   | 指定用户的shell                               |
| -u   | 指定用户的uid                                 |

由于Linux用户必须属于一个组，所以当添加用户并且没有指定组时，系统会自动生成一个与用户同名的组

```
useradd xin *添加用户名为xin的用户（同时生成一个名为xin的组
useradd -d /user/name xin *将用户名为xin的用户添加到name这个目录下
useradd -g s404 xin 将用户xin添加到名称为s404的组中
```

### 设置用户的密码

```
passwd xin *为xin修改一个密码
```

### 对用户进行删除

```
userdel -r xin *连同xin的家目录一起删除
userdel xin *之删除用户，不删除家目录
```

## 查询用户信息

id 用户名

![image-20220619172105584](https://propran-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220619172105584.png)

uid 用户的id号

gid 所在组的id号

## 切换用户

su 用户名

可以切换到高权限用户，比如

```
su root *切换到root用户
```

高权限用户切换到低权限用户不需要密码

返回原来的用户，输入exit

## 查看当前用户

```
whoami *可显示当前登录的用户
```

![image-20220619172517562](https://propran-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220619172517562.png)

## 添加用户组

groupadd 组名

```
groupadd xin *添加一个名为xin的组
```

## 删除用户组

groupdel 组名

```
groupdel xin *删除名为xin的组
```

## 修改用户信息

可以对已有用户信息进行修改

usermod [参数]

| 参数 | 说明                       |
| ---- | -------------------------- |
| -d   | 对用户的主目录进行修改     |
| -e   | 修改账户的有效期           |
| -g   | 修改用户的组               |
| -G   | 修改用户的附属组           |
| -l   | 修改用户的名称             |
| -L   | 锁定用户的密码，使密码无效 |
| -s   | 修改用户使用的shell        |
| -u   | 修改用户id（uid）          |
| -U   | 解除密码锁定               |

```
usermod -g 405 xin *将xin的组切换为405
```

## 配置信息相关的几个文件

### 用户配置信息

/etc/passwd

用户名：密码：用户名id：组id：家目录：shell文件

在该文档种密码由x代替，具体密码由于安全原因加密保存在了shadow中

shadow只有root用户有权限进行访问

![image-20220619180257694](https://propran-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220619180257694.png)

### 组配置信息

/etc/group

可以看到该组名的组id

![image-20220619180345542](https://propran-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220619180345542.png)

### 口令配置信息

存放密码和登录信息，是加密的

/etc/shadow

![image-20220801144833953](https://propran-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220801144833953.png)